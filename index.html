<!DOCTYPE html>
<html>
<body>

<canvas id="canvas" width="1000" height="1000"
style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>

var planets = [
	{name:"earth", mass: 10, x: 450, y: 250, size:15, color:"#808080"},
	{name:"sun", mass: 20, x: 700, y: 500, size:20, color:"#FFFF00"}
];

var ship = {pX:300, pY:100, vX:0.03, vY:0};

function drawPlanets() {
  var ctx = document.getElementById('canvas').getContext('2d');
	for (i=0; i < planets.length; i++) {
		p = planets[i];
    ctx.fillStyle = p.color;
		ctx.fillRect(p.x, p.y, p.size, p.size);
	}
}

function Start() {
  window.requestAnimationFrame(Update);
}

function Update() {

  var ctx = document.getElementById('canvas').getContext('2d');
  ctx.globalCompositeOperation = 'destination-over';
  ctx.clearRect(0, 0, 1000, 1000);
  ctx.fillStyle = "Red";

  // ctx.save();
  // ctx.translate(500, 500);

  // update ship veloctiy
	for (i=0; i < planets.length; i++) {
		p = planets[i];
		magnitude = Math.sqrt(Math.pow(p.x - ship.pX, 2) + Math.pow(p.y - ship.pY, 2));
		componentX = (p.x - ship.pX)/magnitude;
		componentY = (p.y - ship.pY)/magnitude;
	    absForce = p.mass/Math.pow(magnitude, 2);
		changeX = componentX*absForce;
		changeY = componentY*absForce;

		ship.vX += changeX;
		ship.vY += changeY;
	}
  // move ship
  var time = new Date();
	ship.pX += ship.vX * time.getSeconds();
	ship.pY += ship.vY* time.getSeconds();
	ctx.fillRect(ship.pX, ship.pY, 10, 10);

  drawPlanets();

  window.requestAnimationFrame(Update);
}

Start();

</script>

</body>
</html>
